<template>
  <div class="profile">
    <div class="user-info">
      <img :src="user.avatar" alt="–ê–≤–∞—Ç–∞—Ä" v-if="user.avatar">
      <h3>{{ user.fullName }}</h3>
      <p>{{ user.email }}</p>

      <button v-if="isOwnProfile" @click="editProfile">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
    </div>

    <div class="posts">
      <div v-for="post in posts" :key="post.id" class="post">
        <p>{{ post.content }}</p>
        <button v-if="isOwnProfile" @click="editPost(post)">‚úèÔ∏è</button>
        <button v-if="isOwnProfile" @click="deletePost(post)">üóëÔ∏è</button>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  props: ['id'],
  computed: {
    isOwnProfile() {
      return this.id === this.$store.state.auth.currentUser?.id;
    },
    user() {
      return this.$store.getters['users/getUserById'](this.id) || {};
    },
    posts() {
      return this.$store.state.posts.userPosts[this.id] || [];
    }
  },
  methods: {
    editProfile() {
      // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
    },
    editPost(post) {
      // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–∞
    },
    deletePost(post) {
      // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞
    }
  }
}
</script>